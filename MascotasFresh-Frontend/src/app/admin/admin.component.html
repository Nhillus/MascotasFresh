<html lang="en">

<body>

  <app-navbar></app-navbar>

  <div class="container-fluid">
    <div class="row">
      <div class="col-md-3 col-lg-2 ">
        <app-sidebar></app-sidebar>
    </div>

      <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h1 class="h2">Dashboard</h1>
          <div class="btn-toolbar mb-2 mb-md-0">
            <div class="btn-group me-2">
              <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
              <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
            </div>
            <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
              <span data-feather="calendar"></span>
              This week
            </button>
          </div>
        </div>

        <div class="container">
          <h3 > Hola {{this.user?.name}}</h3> <!-- use ?. porque no existe la plantilla en el animal ts, por eso uso la etiqueta que tendrias un comportamiento parecido al any, tambien una solucion seria usar nngIf como tambien deje en el codigo en el caso que no exista el usuario sabe que hacer y no lo rederiza-->
          <div class="row">
            <div class="col-10">
            </div>
            <div class="col-2">
              <button class="btn btn-primary" type="submit" data-bs-toggle="modal" data-bs-target="#exampleModal" >
                <i class="bi bi-plus">Nuevo Usuario</i>
              </button>
            </div>
          </div>
        </div>

        <!-- --------------------------------------------------formulariooooooooooooo para agregar nuevos usuarios  ------------------------------------------------>
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form [formGroup]="userForm">

                  <div class="form-floating mb-3">
                    <input id="floatingEspecie" type="text" class="form-control" formControlName="name" placeholder="Especie">
                    <label for="floatingEspecie">Nombre</label>
                  </div>
                  <div class="form-floating mb-3">
                    <select formControlName="rol_id" style="margin-top: 10px;" class="form-select"  >
                      <option  disabled>Roles Disponibles</option>
                      <option *ngFor="let rol of rolesdisponibles" [value]="rol.id">{{rol.nombre_rol}} </option>
                    </select>
                  </div>
                  <div class="form-floating mb-3">
                    <input id="floatingRaza" type="text" class="form-control" formControlName="email" placeholder="Raza">
                    <label for="floatingRaza">Email</label>
                  </div>
                  <div class="form-floating mb-3">
                    <input id="floatingContraseña" type="password" class="form-control" formControlName="password" placeholder="Contraseña">
                    <label for="floatingContraseña">Contraseña</label>
                  </div>
                  <div class="form-floating mb-3">
                    <input id="floatingPasswordConfirmation" type="password" class="form-control" formControlName="password_confirmation" placeholder="Confirmar Contraseña" >
                    <label for="inputPasswordConfirmation" >Confirmar Contraseña </label>
                  </div>





                  <button type="submit" class="btn btn-primary btn-lg btn-block" style="margin-bottom: 10px;"  data-bs-dismiss="modal" aria-label="Close" (click)="saveUsuario()">Submit</button>
                </form>

              </div>

            </div>
          </div>
        </div>

        <!-- ----------------------------------------------------------------------------------------------------------------------------------------------------------------- -->
        <div class="container">
          <h3 class="text-center">Usuarios en el sistema</h3>
          <div class="row">
            <div class="col-12">
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">
                      Nombre
                    </th>
                    <th scope="col">
                      Email
                    </th>
                    <th scope="col">
                      Rol
                    </th>
                    <th scope="col">Acciones
                    </th>
                  </tr>
                </thead>
                <tbody *ngFor="let user of usuarios">
                  <tr>
                    <th scope="row">{{user.id}}</th>
                    <td> {{user.name}}  </td>
                    <td>{{user.email}}</td>
                    <td>{{user.rol_id}}</td>
                    <td>
                      <div class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Acciones
                      </a>
                      <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#updateTodo-modal" (click)="usuarioSeleccionado(user)" >Editar Usuario</a></li>
                        <li><a class="dropdown-item" (click)="deleteUsusario(user)">Eliminar Usuario</a></li>
                      </ul>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <canvas class="my-4 w-100" id="myChart" width="900" height="380"></canvas>

        <h2>Section title</h2>
        <div class="table-responsive">
          <table class="table table-striped table-sm">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Header</th>
                <th scope="col">Header</th>
                <th scope="col">Header</th>
                <th scope="col">Header</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1,001</td>
                <td>random</td>
                <td>data</td>
                <td>placeholder</td>
                <td>text</td>
              </tr>
              <tr>
                <td>1,002</td>
                <td>placeholder</td>
                <td>irrelevant</td>
                <td>visual</td>
                <td>layout</td>
              </tr>
              <tr>
                <td>1,003</td>
                <td>data</td>
                <td>rich</td>
                <td>dashboard</td>
                <td>tabular</td>
              </tr>
              <tr>
                <td>1,003</td>
                <td>information</td>
                <td>placeholder</td>
                <td>illustrative</td>
                <td>data</td>
              </tr>
              <tr>
                <td>1,004</td>
                <td>text</td>
                <td>random</td>
                <td>layout</td>
                <td>dashboard</td>
              </tr>
              <tr>
                <td>1,005</td>
                <td>dashboard</td>
                <td>irrelevant</td>
                <td>text</td>
                <td>placeholder</td>
              </tr>
              <tr>
                <td>1,006</td>
                <td>dashboard</td>
                <td>illustrative</td>
                <td>rich</td>
                <td>data</td>
              </tr>
              <tr>
                <td>1,007</td>
                <td>placeholder</td>
                <td>tabular</td>
                <td>information</td>
                <td>irrelevant</td>
              </tr>
              <tr>
                <td>1,008</td>
                <td>random</td>
                <td>data</td>
                <td>placeholder</td>
                <td>text</td>
              </tr>
              <tr>
                <td>1,009</td>
                <td>placeholder</td>
                <td>irrelevant</td>
                <td>visual</td>
                <td>layout</td>
              </tr>
              <tr>
                <td>1,010</td>
                <td>data</td>
                <td>rich</td>
                <td>dashboard</td>
                <td>tabular</td>
              </tr>
              <tr>
                <td>1,011</td>
                <td>information</td>
                <td>placeholder</td>
                <td>illustrative</td>
                <td>data</td>
              </tr>
              <tr>
                <td>1,012</td>
                <td>text</td>
                <td>placeholder</td>
                <td>layout</td>
                <td>dashboard</td>
              </tr>
              <tr>
                <td>1,013</td>
                <td>dashboard</td>
                <td>irrelevant</td>
                <td>text</td>
                <td>visual</td>
              </tr>
              <tr>
                <td>1,014</td>
                <td>dashboard</td>
                <td>illustrative</td>
                <td>rich</td>
                <td>data</td>
              </tr>
              <tr>
                <td>1,015</td>
                <td>random</td>
                <td>tabular</td>
                <td>information</td>
                <td>text</td>
              </tr>
            </tbody>
          </table>
        </div>
      </main>
    </div>
    <div class="modal fade" id="updateTodo-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <h3>Editar</h3>
              <div *ngIf="usuarioseleccionado">
                <form  (ngSubmit)="updateUsuario()" >
                    <div class="form-group">
                      <label for="id">Id:</label>
                      <input type="numer" class="form-control"
                                id="id" required [(ngModel)]="usuarioseleccionado.id" name="id" disabled>
                    </div>
                    <div class="form-group">
                      <select [(ngModel)]="usuarioseleccionado.rol_id" style="margin-top: 10px;" class="form-select" [ngModelOptions]="{standalone: true}" >
                        <option  disabled>{{usuarioseleccionado.rol_id}}</option>
                        <option *ngFor="let rol of rolesdisponibles" [value]="rol.id">{{rol.nombre_rol}} </option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="nombre">Nombre</label>
                      <input type="text" class="form-control" placeholder="Nombre"
                                id="nombre" required [(ngModel)]="usuarioseleccionado.name" name="nombre">
                    </div>
                    <div class="form-group">
                      <label for="email">email</label>
                      <input type="text" class="form-control" placeholder="email"
                                id="email" required [(ngModel)]="usuarioseleccionado.email" name="email">
                    </div>
                    <div>
                      <button type="submit" class="btn btn-primary btn-lg btn-block" style="margin-bottom: 10px;"  data-bs-dismiss="modal" aria-label="Close">Submit</button>
                    </div>
                </form>
              </div>
          </div>
        </div>
      </div>
    </div>
  </div>




    <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>

      <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script><script src="dashboard.js"></script>
  </body>
</html>


